<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Plot function for incidence objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for plot.incidence {incidence}"><tr><td>plot.incidence {incidence}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Plot function for incidence objects</h2>

<h3>Description</h3>

<p>This function is used to visualise the output of the <code><a href="incidence.html">incidence()</a></code>
function using the package <code>ggplot2</code>. #'
</p>


<h3>Usage</h3>

<pre>
## S3 method for class 'incidence'
plot(
  x,
  ...,
  fit = NULL,
  stack = is.null(fit),
  color = "black",
  border = NA,
  col_pal = incidence_pal1,
  alpha = 0.7,
  xlab = "",
  ylab = NULL,
  labels_week = !is.null(x$weeks),
  labels_iso = !is.null(x$isoweeks),
  show_cases = FALSE,
  n_breaks = 6
)

add_incidence_fit(p, x, col_pal = incidence_pal1)

## S3 method for class 'incidence_fit'
plot(x, ...)

## S3 method for class 'incidence_fit_list'
plot(x, ...)

scale_x_incidence(x, n_breaks = 6, labels_week = TRUE, ...)

make_breaks(x, n_breaks = 6L, labels_week = TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>An incidence object, generated by the function
<code><a href="incidence.html">incidence()</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>arguments passed to <code><a href="../../ggplot2/html/scale_x_date.html">ggplot2::scale_x_date()</a></code>,
<code><a href="../../ggplot2/html/scale_x_datetime.html">ggplot2::scale_x_datetime()</a></code>, or <code><a href="../../ggplot2/html/scale_x_continuous.html">ggplot2::scale_x_continuous()</a></code>, depending
on how the <code style="white-space: pre;">$date</code> element is stored in the incidence object.</p>
</td></tr>
<tr valign="top"><td><code>fit</code></td>
<td>
<p>An 'incidence_fit' object as returned by <code><a href="fit.html">fit()</a></code>.</p>
</td></tr>
<tr valign="top"><td><code>stack</code></td>
<td>
<p>A logical indicating if bars of multiple groups should be
stacked, or displayed side-by-side.</p>
</td></tr>
<tr valign="top"><td><code>color</code></td>
<td>
<p>The color to be used for the filling of the bars; NA for
invisible bars; defaults to &quot;black&quot;.</p>
</td></tr>
<tr valign="top"><td><code>border</code></td>
<td>
<p>The color to be used for the borders of the bars; NA for
invisible borders; defaults to NA.</p>
</td></tr>
<tr valign="top"><td><code>col_pal</code></td>
<td>
<p>The color palette to be used for the groups; defaults to
<code>incidence_pal1</code>. See <code><a href="palettes.html">incidence_pal1()</a></code> for other palettes implemented in
incidence.</p>
</td></tr>
<tr valign="top"><td><code>alpha</code></td>
<td>
<p>The alpha level for color transparency, with 1 being fully
opaque and 0 fully transparent; defaults to 0.7.</p>
</td></tr>
<tr valign="top"><td><code>xlab</code></td>
<td>
<p>The label to be used for the x-axis; empty by default.</p>
</td></tr>
<tr valign="top"><td><code>ylab</code></td>
<td>
<p>The label to be used for the y-axis; by default, a label will be
generated automatically according to the time interval used in incidence
computation.</p>
</td></tr>
<tr valign="top"><td><code>labels_week</code></td>
<td>
<p>a logical value indicating whether labels x axis tick
marks are in week format YYYY-Www when plotting weekly incidence; defaults to
TRUE.</p>
</td></tr>
<tr valign="top"><td><code>labels_iso</code></td>
<td>
<p>(deprecated) This has been superceded by <code>labels_iso</code>.
Previously:a logical value indicating whether labels x axis tick marks are
in ISO 8601 week format yyyy-Www when plotting ISO week-based weekly
incidence; defaults to be TRUE.</p>
</td></tr>
<tr valign="top"><td><code>show_cases</code></td>
<td>
<p>if <code>TRUE</code> (default: <code>FALSE</code>), then each observation will be
colored by a border. The border defaults to a white border unless specified
otherwise. This is normally used outbreaks with a small number of cases.
Note: this can only be used if <code>stack = TRUE</code></p>
</td></tr>
<tr valign="top"><td><code>n_breaks</code></td>
<td>
<p>the ideal number of breaks to be used for the x-axis
labeling</p>
</td></tr>
<tr valign="top"><td><code>p</code></td>
<td>
<p>An existing incidence plot.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code>plot()</code> will visualise an incidence object using <code>ggplot2</code>
</p>
</li>
<li> <p><code>make_breaks()</code> calculates breaks from an incidence object that always
align with the bins and start on the first observed incidence.
</p>
</li>
<li> <p><code>scale_x_incidence()</code> produces and appropriate <code>ggplot2</code> scale based on
an incidence object.
</p>
</li></ul>



<h3>Value</h3>


<ul>
<li> <p><code>plot()</code> a <code><a href="../../ggplot2/html/ggplot.html">ggplot2::ggplot()</a></code> object.
</p>
</li>
<li> <p><code>make_breaks()</code> a two-element list. The &quot;breaks&quot; element will contain the
evenly-spaced breaks as either dates or numbers and the &quot;labels&quot; element
will contain either a vector of weeks OR a <code><a href="../../ggplot2/html/waiver.html">ggplot2::waiver()</a></code> object.
</p>
</li>
<li> <p><code>scale_x_incidence()</code> a <span class="pkg">ggplot2</span> &quot;ScaleContinuous&quot; object.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Thibaut Jombart <a href="mailto:thibautjombart@gmail.com">thibautjombart@gmail.com</a>
Zhian N. Kamvar <a href="mailto:zkamvar@gmail.com">zkamvar@gmail.com</a>
</p>


<h3>See Also</h3>

<p>The <code><a href="incidence.html">incidence()</a></code> function to generate the 'incidence'
objects.
</p>


<h3>Examples</h3>

<pre>

if(require(outbreaks) &amp;&amp; require(ggplot2)) { withAutoprint({
  onset &lt;- outbreaks::ebola_sim$linelist$date_of_onset

  ## daily incidence
  inc &lt;- incidence(onset)
  inc
  plot(inc)

  ## weekly incidence
  inc.week &lt;- incidence(onset, interval = 7)
  inc.week
  plot(inc.week) # default to label x axis tick marks with isoweeks
  plot(inc.week, labels_week = FALSE) # label x axis tick marks with dates
  plot(inc.week, border = "white") # with visible border

  ## use group information
  sex &lt;- outbreaks::ebola_sim$linelist$gender
  inc.week.gender &lt;- incidence(onset, interval = "1 epiweek", groups = sex)
  plot(inc.week.gender)
  plot(inc.week.gender, labels_week = FALSE)

  ## show individual cases at the beginning of the epidemic
  inc.week.8 &lt;- subset(inc.week.gender, to = "2014-06-01")
  p &lt;- plot(inc.week.8, show_cases = TRUE, border = "black")
  p

  ## update the range of the scale
  lim &lt;- c(min(get_dates(inc.week.8)) - 7*5, 
           aweek::week2date("2014-W50", "Sunday"))
  lim
  p + scale_x_incidence(inc.week.gender, limits = lim)

  ## customize plot with ggplot2
  plot(inc.week.8, show_cases = TRUE, border = "black") +
    theme_classic(base_size = 16) +
    theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5)) 

  ## adding fit
  fit &lt;- fit_optim_split(inc.week.gender)$fit
  plot(inc.week.gender, fit = fit)
  plot(inc.week.gender, fit = fit, labels_week = FALSE)

})}

</pre>

<hr /><div style="text-align: center;">[Package <em>incidence</em> version 1.7.1 <a href="00Index.html">Index</a>]</div>
</body></html>
